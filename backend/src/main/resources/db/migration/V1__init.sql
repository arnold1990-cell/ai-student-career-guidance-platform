CREATE TABLE users (id BIGINT PRIMARY KEY AUTO_INCREMENT, email VARCHAR(190) UNIQUE NOT NULL, password_hash VARCHAR(255) NOT NULL, role VARCHAR(30) NOT NULL, status VARCHAR(30) NOT NULL, phone VARCHAR(50), created_at TIMESTAMP NULL, last_login_at TIMESTAMP NULL);
CREATE TABLE student_profiles (user_id BIGINT PRIMARY KEY, personal_details TEXT, qualifications TEXT, experience TEXT, location VARCHAR(120), cv_document_id BIGINT, transcript_document_id BIGINT, preferences JSON, CONSTRAINT fk_sp_user FOREIGN KEY (user_id) REFERENCES users(id));
CREATE TABLE company_profiles (user_id BIGINT PRIMARY KEY, company_name VARCHAR(190), registration_number VARCHAR(120), industry VARCHAR(100), contact_info TEXT, official_email VARCHAR(190), verification_status VARCHAR(30), submitted_at TIMESTAMP NULL, reviewed_at TIMESTAMP NULL, review_notes TEXT, CONSTRAINT fk_cp_user FOREIGN KEY (user_id) REFERENCES users(id));
CREATE TABLE documents (id BIGINT PRIMARY KEY AUTO_INCREMENT, owner_user_id BIGINT, type VARCHAR(30), filename VARCHAR(255), mime_type VARCHAR(100), size BIGINT, storage_path VARCHAR(400), uploaded_at TIMESTAMP NULL);
CREATE TABLE careers (id BIGINT PRIMARY KEY AUTO_INCREMENT, title VARCHAR(190), field VARCHAR(120), demand_level VARCHAR(40), salary_range_min INT, salary_range_max INT, description TEXT);
CREATE TABLE bursaries (id BIGINT PRIMARY KEY AUTO_INCREMENT, company_id BIGINT, name VARCHAR(190), description TEXT, field_of_study VARCHAR(120), academic_level VARCHAR(120), start_date DATE, end_date DATE, funding_amount DECIMAL(12,2), benefits TEXT, status VARCHAR(40), eligibility_criteria JSON, location_filters JSON, required_subjects JSON, created_at TIMESTAMP NULL, updated_at TIMESTAMP NULL);
CREATE TABLE bursary_applications (id BIGINT PRIMARY KEY AUTO_INCREMENT, bursary_id BIGINT, student_id BIGINT, status VARCHAR(40), submitted_at TIMESTAMP NULL, updated_at TIMESTAMP NULL);
CREATE TABLE subscription_plans (id BIGINT PRIMARY KEY AUTO_INCREMENT, name VARCHAR(30), price DECIMAL(12,2), billing_cycle VARCHAR(30), features JSON);
CREATE TABLE student_subscriptions (id BIGINT PRIMARY KEY AUTO_INCREMENT, student_id BIGINT, plan_id BIGINT, status VARCHAR(30), started_at TIMESTAMP NULL, ends_at TIMESTAMP NULL, last_payment_status VARCHAR(30));
CREATE TABLE payment_transactions (id BIGINT PRIMARY KEY AUTO_INCREMENT, student_id BIGINT, plan_id BIGINT, amount DECIMAL(12,2), currency VARCHAR(12), status VARCHAR(30), provider_ref VARCHAR(190), created_at TIMESTAMP NULL);
CREATE TABLE notifications (id BIGINT PRIMARY KEY AUTO_INCREMENT, user_id BIGINT, channel VARCHAR(30), type VARCHAR(40), title VARCHAR(190), message TEXT, status VARCHAR(30), created_at TIMESTAMP NULL);
CREATE TABLE message_threads (id BIGINT PRIMARY KEY AUTO_INCREMENT, company_id BIGINT, student_id BIGINT, created_at TIMESTAMP NULL);
CREATE TABLE messages (id BIGINT PRIMARY KEY AUTO_INCREMENT, thread_id BIGINT, sender_user_id BIGINT, body TEXT, created_at TIMESTAMP NULL);
CREATE TABLE audit_logs (id BIGINT PRIMARY KEY AUTO_INCREMENT, actor_user_id BIGINT, action VARCHAR(120), entity_type VARCHAR(80), entity_id VARCHAR(120), metadata JSON, created_at TIMESTAMP NULL);
CREATE TABLE password_reset_tokens (id BIGINT PRIMARY KEY AUTO_INCREMENT, user_id BIGINT, token_hash VARCHAR(128), expires_at TIMESTAMP NULL, used BOOLEAN);
CREATE TABLE templates (id BIGINT PRIMARY KEY AUTO_INCREMENT, name VARCHAR(120), content TEXT, channel VARCHAR(30));
CREATE TABLE bursary_view_events (id BIGINT PRIMARY KEY AUTO_INCREMENT, bursary_id BIGINT, student_id BIGINT, viewed_at TIMESTAMP NULL);
CREATE TABLE company_shortlists (id BIGINT PRIMARY KEY AUTO_INCREMENT, company_id BIGINT, student_id BIGINT);
CREATE TABLE invitation_links (id BIGINT PRIMARY KEY AUTO_INCREMENT, company_id BIGINT, bursary_id BIGINT, token VARCHAR(190), created_at TIMESTAMP NULL);
